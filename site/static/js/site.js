var App=App||{};App.Tools={},App.Tools.navigate=function(e){window.location.hash="!/"+e};var App=App||{};App.Detail=React.createClass({displayName:"Detail",render:function(){return React.createElement("p",null,"Detail ",this.props.id)}});var App=App||{};App.Feed=React.createClass({displayName:"Feed",render:function(){var e=this.props.photos;return React.createElement("div",{id:"feed"},React.createElement("h1",{id:"feed-title"},"Flickr Public Feed"),React.createElement(App.PhotoList,{photos:e}))}}),App.PhotoList=React.createClass({displayName:"PhotoList",resizeNode:function(){$(this.getDOMNode()).height($(window).innerHeight()-125)},componentDidMount:function(){this.resizeNode(),$(window).on("resize",function(){this.resizeNode()}.bind(this))},render:function(){var e=this.props.photos.map(function(e,t){return React.createElement(App.PhotoListItem,{key:"photo-li-"+t,photo:e})});return React.createElement("ul",{id:"photo-list",className:"listfix"},e)}}),App.PhotoListItem=React.createClass({displayName:"PhotoListItem",showDetail:function(){App.Tools.navigate("photo/"+this.props.photo.id)},render:function(){var e=this.props.photo,t={backgroundImage:"url("+e.media.m+");"},a=e.author;-1!==a.indexOf("nobody@flickr.com (")&&(a=a.replace("nobody@flickr.com (","").slice(0,-1));var i=React.createElement("span",{className:"published"},"Published: ",moment(e.published).format("Do MMM [at] HH:mm"));return React.createElement("li",null,React.createElement("div",{className:"thumb",style:t,onClick:this.showDetail}),React.createElement("div",{className:"inner"},React.createElement("h2",{onClick:this.showDetail},e.title||"Untitled"),React.createElement("div",{className:"details"},i,React.createElement("a",{className:"author",href:"https://www.flickr.com/people/"+e.author_id+"/",target:"_blank"},a),i,React.createElement("a",{className:"view",href:e.link,target:"_blank"},"View on Flickr"))))}});var App=App||{};App.UI=React.createClass({displayName:"UI",mixins:[ReactMiniRouter.RouterMixin],routes:{"/":"feed","/photo/:id":"detail"},getInitialState:function(){return{photos:[]}},loadPhotos:function(){$.ajax({url:"https://api.flickr.com/services/feeds/photos_public.gne?tags=potato&tagmode=all&format=json&jsoncallback=?",type:"GET",cache:!0,dataType:"jsonp",success:function(e){var t;t="undefined"!=typeof e.items?e.items.map(function(e){var t=e.link.split("/");return e.id=t[t.length-2],e}):[],this.setState({photos:t})}.bind(this)})},componentDidMount:function(){this.loadPhotos()},render:function(){return this.renderCurrentRoute()},feed:function(){return React.createElement(App.Feed,{photos:this.state.photos})},detail:function(e){return React.createElement(App.Detail,{id:e})}}),React.render(React.createElement(App.UI,null),document.getElementById("app"));